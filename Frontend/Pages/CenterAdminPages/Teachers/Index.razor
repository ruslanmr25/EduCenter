@page "/center-admin/teachers"


<div class="card fade-in">
     <div class="card-body">
          <div class="d-flex align-items-center justify-content-between">
               <h4 class="card-title">O'qituvchilar ro'yxati</h4>

               <NavLink href="/center-admin/teachers/create" class="btn btn-sm btn-primary">
                    <i class="bx bx-plus me-1"></i> Qo'shish
               </NavLink>
          </div>
     </div> <!-- end card body -->
     <div class="table-responsive table-centered">
          <table class="table mb-0">
               <thead class="bg-light bg-opacity-50">
                    <tr>
                         <th class="border-0 py-2">Id</th>
                         <th class="border-0 py-2">Ismi</th>

                         <th class="border-0 py-2">Status</th>
                         <th>Yaratilgan vaqti</th>

                         <th>Tahrirlash</th>
                    </tr>
               </thead> <!-- end thead-->
               <tbody>



                    @foreach (var item in teachers.Items.Select((teacher, index) => new { teacher, index }))
                    {

                         <tr>
                              <td>@((teachers.Meta!.Page - 1) * teachers.Meta.PageSize + item.index + 1)</td>
                              <td>@item.teacher.FullName</td>


                              <td><i class="bx bxs-circle text-success me-1"></i>Active</td>
                              <td>@item.teacher.CreatedAt</td>

                              <td>Tahrirlash</td>


                         </tr>
                    }

               </tbody> <!-- end tbody -->
          </table> <!-- end table -->
     </div> <!-- table responsive -->


     <div class="align-items-center justify-content-between row g-0 text-center text-sm-start p-3 border-top">
          <div class="col-sm">
               <div class="text-muted">
                    <span class="fw-semibold">@teachers.Meta?.TotalCount</span> tadan <span
                         class="fw-semibold">@teachers.Items.Count</span> tasi ko'rsatilmoqda

               </div>
          </div>


          <PaginationComponent Meta="teachers.Meta" OnClickEvent="@LoadData"></PaginationComponent>
     </div>



</div> <!-- end card -->


@inject TeacherClient teacherClient
@code
{

     protected Collection<User> teachers = new();
     protected override async Task OnInitializedAsync()
     {

          await LoadData(1);

          await base.OnInitializedAsync();


     }


     protected async Task LoadData(int page)
     {
          var teacherResponse = await teacherClient.GetAllAsync(page, 50);

          if (teacherResponse.Success)
          {
               teachers = teacherResponse.Data!;


          }

          else
          {
               Console.WriteLine("Nimdir xato ketti");
          }

     }



}